/*
Given inorder and postorder traversal of a tree, construct the binary tree.

Note:
You may assume that duplicates do not exist in the tree.

*/

//递归

def buildTreeImp(inorder: Array[Int], s1:Int,e1:Int,postorder: Array[Int],s2:Int,e2:Int):TreeNode = {
    if(s1>e1) return null;
    var tree = new TreeNode(postorder(e2));
    val s3 = inorder.indexOf(postorder(e2));
    tree.left = buildTreeImp(inorder,s1,s3-1,postorder,s2,e2+s3-e1-1);
    tree.right = buildTreeImp(inorder,s3+1,e1,postorder,e2+s3-e1,e2-1);
    return tree;
}


def buildTree(inorder: Array[Int], postorder: Array[Int]): TreeNode = {
    if(inorder==null || postorder==null || inorder.length!=postorder.length) return null; 
    else return buildTreeImp(inorder,0,inorder.length-1,postorder,0,postorder.length-1);
}

buildTree(Array(2,1,3),Array(2,3,1))

val in = Array(104,377,-810,-1130,-1452,-1345,1747,1348,2438,2160,316,-1853,2584,-278,620,-1102,-495,-893,2188,-970,-553,-1036,-1062,1402,283,1827,-1412,1093,-529,-928,2801,-239,2927,-1202,1961,-630,-1139,951,-1764,-1757,2958,2609,2239,-682,2543,1965,-58,163,755,-1165,1882,2208,-892,934,-1671,-410,2936,1898,533,1731,528,2080,-918,2918,-1895,-1221,2408,671,-1716,2366,-260,2604,-1739,607,1344,1165,-264,1777,-30,373,-468,2466,299,1964,2717,-508,2794,-257,-1913,185,250,1142,892,848,-456,-1674,1060,-1643,997,-68,-1395,-329,-1809,1284,304,-1601,-868,2803,1488,1593,2298,2412,-1542,-13,2110,1023,2832,-425,731,-309,1678,2129,-1065,1172,-739,584,1207,-337,61,2259,1535,775,-784,-181,842,-1767,967,807,1826,1544,1266,2205,2590,-1135,-1929,1728,-1780,2037,-941,-1388,803,-1488,1899,2494,-994,-165,-1571,1042,1422,275,-1866,1699,1586,301,-1750,-807,-243,1517,-681,-169,1990,2211,2391,-1646,-1187,-645,-1014,1631,2236,-1520,-241,1910,-1697,-406,-131,-182,261,-272,-851,169,1957,-1545,2292,-93,2011,943,1564,2076,308,922,187,570,-1630,-439,-459,-1556,124,1931,879,1188,173,-1551,937,2697,896,105,918,1768,414,-1504,1373,-644,-1803,904,2429,1290,-1788,-760,782,2873,1183,819,-1305,-540,2539,-1329,-1243,812,930,2340,2529,728,1308,986,2899,1033,-1600,1050,-1611,993,-979,-1375,-845,-1103,872,-677,461,-1416,2770,-191,1497,1832,-690,-10,2464,-1133,1798,2549,1857,-1654,1200,2938,-1616,1758,632,1078,2121,-1915,-372,-1693,1975,1099,1180,1565,2598,-1678,2207,-397,-1816,2339,-1567,1031,-188,-1431,-1626,-700,-323,-564,-550,-269,-639,-615,-584,2651,1602,2102,652,1332,2575,2579,894,-766,2769,-926,694,2906,-1857,751,-796,77,-499,-1298,1627,400,2185,306,2118,-163,2196,-66,91,1665,-1164,1393,25,-1919,969,2291,1288,2173,2919,345,1771,-1706,513,-552,2891,1543,-211,-535,492,-168,1519,295,715,832,2798,396,2669,-1732,-999,-1155,2309,1600,2288,2667,1452,2963,1456,2035,900,-6,2727,-1512,-1921,2489,-1218,72,1520,571,-328,-69,-1937,1412,2384,-1002,-518,-1137,-115,-714,0,-787,1019,-806,-900,2506,-186,6,1104,2119,1592,407,2795,-1569,-1425,1297,1485,-1343,2920,-103,2374,1688,2713,-1820,-821,408,-1096,-1074,1613,2531,789,-1061,-1665,1695,1980,1021,-1870,-1378,-625,-713,-1206,1271,550,-1215,2342,-1944,-1960,2999,-1657,-1056,-1018,2215,-1307,300,2743,-1606,1070,-236,-1449,-1256,1201,-1580,2790,81,-450,890,1822,1368,-423,2925,869,-1771,790,2967,-1742,-986,132,-334,648,2265,2468,1524,-1951,1484,1533,289,2553,1743,468,-351,2973,-124,-989,-1331,2915,750,51,1745,-365,335,393,160,737,2793,995,-1740,209,229,2661,-530,-1247,1662,-1810,1757,-427,-701,1803,1643,-1708,-1320,479,2038,-31,2719,478,190,684,826,-617,1244,450,-805,-1494,2776,591,2564,-1471,102,267,-527,376,2580,-717,1605,-981,1384,-688,-396,-1584,-1696,2499,-298,2644,470,183,1727,-11,689,1053,-1683,948,2536,2877,2313,-595,1482,285,2842,1186,1601,-1486,2477,101,171,2229,-151,2381,1161,-1873,2863,1880,1590,-952,-1948,613,576,2235,1313,-575,1619,112,1742,-937,-515,-292,1574,-1083,736,-1854,-94,224,746,2112,1493,2585,1903,2677,2163,1912,-859,1726,276,-512,598,-659,1828,794,2952,-1255,-187,-1650,-882,730,1453,2117,-1240,1447,769,1229,2443,-1655,1660,2294,-925,1153,-661,2756,2175,-602,1075,-107,2356,1234,2179,150,2131,-1455,-139,619,1836,211,-818,153,1635,-1959,-1468,1851,-1700,-948,956,1294,-891,2403,1302,1063,127,-244,1466,1529,1649,946,1235,-1904,1128,645,16,-658,2133,-1401,1553,1895,502,-1413,-912,-1589,-731,-881,2546,2226,-1227,-612,-175,1949,-313,1963,1770,1443,1364,2901,-321,767,-651,165,248,1444,2914,2583,947,360,-1029,314,1495,241,214,-808,-1581,1112,-46,1018,1952,-223,1322,-1346,1445,-1142,1413,2984,130,564,-666,2812,-1353,2098,2447,1024,1805,-954,460,-76,-1578,878,1894,1440,-1663,-1783,1115,198,912,-1172,-271,459,-1524,2310,1534,-519,-420,2957,-780,-1711,1159,-1957,-102,-1821,2775,2555,-59,1449,2626,290,262,83,2843,-1462,-132,-1124,1580,2462,779,-820,2000,-1510,270,-421,638,1999,-377,70,-1812,2691,-574,-375,1408,2249,-1553,-1302,-1333,-1421,781,2019,-1916,2247,-606,2524,1015,2445,-417,1606,-105,2638,2246,2633,-1855,-285,2393,-233,2402,-667,212,-1908,518,2909,-721,641,2140,2346,2225,2361,-1613,2560,1330,-1563,2866,-510,332,1472,-1949,-1946,-222,149,763,1168,-1232,-593,157,-478,-1317,1347,2178,-870,341,2087,2851,-1506,1336,2069,2194,399,2078,1641,1617,2737,1441,-256,2912,1656,2848,2540,-1234,552,2051,-906,2944,1750,403,-1638,1820,230,-909,2432,762,465,-82,-1347,1508,-199,-454,-1046,795,699,891,1719,-1041,2764,2485,-638,-485,-1219,1919,-1798,-1887,556,517,2167,-901,-957,-1811,-1914,649,882,984,-305,-1323,-300,-712,2538,-207,1135,2370,1531,-1533,-773,2094,-804,-274,-225,-161,-1903,2105,1853,1277,-200,-1198,1257,-1201,1765,-1336,-148,2768,-1270,835,2460,2502,-1173,368,2257,-1592,1375,-765,2518,-89,-1473,-526,73,2380,2951,1208,586,2316,2354,-1151,-533,129,1217,1981,-622,1460,727,172,2287,1552,2256,2015,-1131,914,-940,-399,2617,2612,-1658,-1682,1933,2070,-972,1008,-571,1527,-248,606,-624,74,2478,-641,1510,-349,2819,-1541,-1110,-1932,2735,2474,-768,1628,547,1178,-1865,1512,-1945,-908,1830,-1523)
val post = Array(104,-810,1348,1747,-1345,2438,-1452,-1130,2160,-1853,2584,316,377,620,-893,-495,-1102,-278,283,1402,-1062,-1036,-553,-970,1827,1093,-529,-239,-1202,1961,2927,2801,-928,-1139,-1764,951,-630,-1412,2609,2958,-1757,2239,2188,-58,1965,755,163,1882,2208,-1165,-1671,-410,934,-892,2543,533,1731,528,1898,2936,-682,-918,2918,-1221,671,2408,-1895,-260,2366,-1716,-1739,607,2604,-264,1165,-30,373,299,-508,2717,1964,2466,-468,1777,-1913,185,-257,892,1142,250,2794,-1674,1060,-456,848,1344,-1395,-68,-329,997,1284,-1809,-1601,-868,304,-1643,1593,1488,2412,2110,-13,-1542,-425,-309,1678,731,2832,-1065,-739,584,1207,1172,-337,2129,1023,2298,1535,2259,842,-1767,1826,807,967,2205,2590,1266,-1929,-1780,2037,1728,-1135,1544,-181,-784,-1388,803,-941,775,-1488,61,2803,-994,-165,1042,-1571,1422,-1866,1586,301,1699,275,2494,-243,1517,-807,-1750,1899,2080,-169,2211,2391,1990,-1187,-645,2236,1631,-1520,-1014,-1646,-241,-1697,-131,-406,-182,-272,261,1910,-851,-1545,1957,169,-93,943,2011,2076,308,1564,187,-1630,-459,-439,570,124,-1556,922,2292,879,-1551,173,1188,2697,937,918,105,414,1373,-1504,1768,896,-1803,2429,904,-1788,1290,782,819,1183,-540,2539,-1305,-1243,-1329,930,2529,2340,1308,1033,-1600,2899,986,1050,993,-979,-1611,728,812,2873,872,-1103,-845,461,-1416,-677,-1375,-760,-191,1832,-690,1497,2770,-644,1931,2464,1798,2549,-1133,1200,2938,-1654,1857,-1616,1078,2121,632,-372,1975,-1693,-1915,1565,1180,1099,-1678,-397,-1816,2207,-1567,2339,-188,-1431,1031,-700,-1626,-323,-269,-550,-639,-584,2102,1602,2651,652,-615,-564,2598,894,2579,2575,2769,694,-926,-1857,751,2906,77,-796,-766,1627,2185,-163,2118,-66,2196,306,400,-1298,25,1393,969,-1919,2291,-1164,1665,2173,345,-1706,1771,2919,2891,1543,-211,-552,492,-535,513,1288,1519,715,832,2798,295,-168,91,-499,1332,1758,2669,-999,-1732,396,1600,2288,2667,2309,2963,1456,900,2035,-1512,2727,-6,2489,-1218,571,1520,72,-69,-1937,1412,-518,-1002,-714,0,-115,-1137,1019,-806,-787,2384,-328,-1921,-186,2506,1104,6,1592,407,2119,-1569,2795,1297,-1343,1485,-103,2920,1688,408,-821,-1096,-1074,-1820,2713,2374,2531,789,1613,-1425,-900,1452,-1155,-1665,1980,1021,-1870,-713,-625,-1206,1271,-1378,-1215,-1960,-1944,2999,-1056,-1018,2215,-1657,2342,-1307,2743,-1606,300,-1256,1201,-1449,-236,-1580,-450,890,81,-423,1368,1822,2790,-1771,790,869,2925,1070,-1742,-986,648,2468,2265,1524,-334,-1951,1533,289,2553,-351,468,-124,2973,1743,-1331,-989,1484,132,750,51,-365,1745,2915,2967,160,393,737,995,2793,209,2661,229,-1740,1757,-1810,-701,1803,-1320,-1708,1643,2038,2719,-31,479,190,684,478,-427,1662,1244,-617,-805,450,2776,591,-1494,826,-1247,-530,102,2580,376,-527,267,-717,-1471,-688,-1584,-396,1384,-981,2499,2644,-298,-1696,1605,2564,183,-11,1053,689,948,1482,-595,2313,2877,2536,2842,285,-1683,1186,1727,470,2477,-1486,171,2381,1161,1590,-952,1880,2863,-1948,-1873,576,-575,1619,112,1742,1313,2235,-937,613,-151,2229,101,1601,335,550,1695,-1061,-10,1574,-1854,736,-1083,746,224,1493,2112,1903,2163,1912,-859,2677,1726,-512,-659,794,2952,1828,598,276,2585,-1650,-882,-187,730,-1255,-94,-292,2117,-1240,769,2443,1229,2294,1660,-925,-661,1153,2175,2756,-602,1234,2356,150,2131,2179,-107,1075,-1655,-139,-1455,1447,1836,153,1635,-818,1851,-1468,-948,956,-891,2403,1294,1063,1466,-244,127,1302,-1904,1128,1235,946,645,1649,1529,-1700,-1959,211,-658,-1401,1895,1553,-1413,-912,502,-731,2226,2546,-1227,-881,-313,1949,-175,-612,-1589,2133,16,1770,1443,-321,2901,165,-651,248,767,947,2583,2914,-1029,314,360,241,-808,214,1112,-1581,1495,1444,1018,-46,1364,-223,1445,-1346,1322,-1142,130,2984,-666,-1353,2812,564,2447,2098,1413,1952,1963,619,-954,-76,-1578,460,878,1805,-1663,1440,198,-1172,912,-271,1115,-1783,1894,2310,1534,-1524,459,-519,2957,-780,-1711,-420,-1957,1159,2775,2555,-1821,290,2626,83,2843,-1462,262,-1124,-132,779,-820,2462,-1510,2000,-421,270,1580,1449,1999,638,-59,-1812,-574,2691,2249,1408,-375,70,-1302,-1553,-377,781,-1421,-1333,-102,1024,1453,-1916,2247,2524,-417,2445,1606,-105,2633,2246,2638,1015,-606,-1855,-233,212,-667,-1908,2402,2393,2909,641,-721,2346,2140,2225,518,2866,-1563,1330,2560,-1949,1472,332,-510,-1613,-222,-1946,2361,-285,1168,-1232,763,-478,157,-593,149,1347,341,2087,-870,2178,1336,2194,2078,399,1617,1641,2069,-1506,2851,-1317,2019,-515,2912,1656,-256,2848,-1234,2051,552,2540,1750,2944,1820,230,-1638,2432,-909,403,-906,1441,465,-1347,1508,-454,699,795,-1046,-199,-1041,1719,-638,2485,-1219,1919,-485,2764,556,-901,2167,517,-1887,-1798,891,-82,762,649,984,882,-1914,-300,-1323,-305,-207,2538,-712,1135,-1811,-773,-1533,-274,-804,-161,-225,-1903,2094,1531,1277,-1198,-200,1853,2105,-1201,1765,1257,2768,-1270,-148,2460,835,-1173,2502,2257,368,1375,-765,-1592,2518,-1473,2380,73,-526,-89,-1336,2370,1208,586,2316,-1151,129,1981,1460,-622,1217,2287,172,727,-533,2354,2256,914,2617,2612,-399,-940,-1131,1933,-1682,2070,-1658,2015,1008,-972,606,-248,1527,-571,1552,2951,2478,1510,-349,-1110,-1541,2819,-1932,-641,-768,2474,2735,74,547,1178,1512,-1945,1830,-1523,-908,-1865,1628,-624,-957,2737,-681)
buildTree(in,post)

//非递归
